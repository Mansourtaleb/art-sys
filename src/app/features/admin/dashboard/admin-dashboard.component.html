<div class="dashboard">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>
      <i class="bi bi-speedometer2 me-2"></i>
      Dashboard Administrateur
    </h2>
    <button class="btn btn-outline-primary" (click)="loadStatistiques()">
      <i class="bi bi-arrow-clockwise me-2"></i>
      Actualiser
    </button>
  </div>

  @if (loading()) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Chargement...</span>
      </div>
    </div>
  } @else if (stats()) {
    <!-- Stats Cards -->
    <div class="row g-4 mb-4">
      <!-- Utilisateurs -->
      <div class="col-xl-3 col-md-6">
        <div class="card stat-card border-0 shadow-sm">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <div>
                <h6 class="text-muted mb-2">Utilisateurs</h6>
                <h3 class="mb-0">{{ stats()!.nombreUtilisateurs }}</h3>
                <small class="text-muted">
                  <i class="bi bi-people-fill me-1"></i>
                  {{ stats()!.nombreClients }} clients / {{ stats()!.nombreArtistes }} artistes
                </small>
              </div>
              <div class="stat-icon bg-primary bg-opacity-10 text-primary">
                <i class="bi bi-people fs-2"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Œuvres -->
      <div class="col-xl-3 col-md-6">
        <div class="card stat-card border-0 shadow-sm">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <div>
                <h6 class="text-muted mb-2">Œuvres</h6>
                <h3 class="mb-0">{{ stats()!.nombreOeuvres }}</h3>
                <small class="text-success">
                  <i class="bi bi-arrow-up me-1"></i>
                  Publiées
                </small>
              </div>
              <div class="stat-icon bg-success bg-opacity-10 text-success">
                <i class="bi bi-image fs-2"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Commandes -->
      <div class="col-xl-3 col-md-6">
        <div class="card stat-card border-0 shadow-sm">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <div>
                <h6 class="text-muted mb-2">Commandes</h6>
                <h3 class="mb-0">{{ stats()!.nombreCommandes }}</h3>
                <small class="text-info">
                  <i class="bi bi-cart3 me-1"></i>
                  Total
                </small>
              </div>
              <div class="stat-icon bg-info bg-opacity-10 text-info">
                <i class="bi bi-cart3 fs-2"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Revenus -->
      <div class="col-xl-3 col-md-6">
        <div class="card stat-card border-0 shadow-sm">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <div>
                <h6 class="text-muted mb-2">Revenus</h6>
                <h3 class="mb-0">{{ stats()!.revenuTotal }} DT</h3>
                <small class="text-warning">
                  <i class="bi bi-currency-dollar me-1"></i>
                  Total
                </small>
              </div>
              <div class="stat-icon bg-warning bg-opacity-10 text-warning">
                <i class="bi bi-cash-stack fs-2"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="row g-4">
      <div class="col-md-4">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body">
            <h5 class="card-title">
              <i class="bi bi-image me-2 text-primary"></i>
              Gestion des Œuvres
            </h5>
            <p class="card-text text-muted">
              Gérer toutes les œuvres du site
            </p>
            <a routerLink="/admin/oeuvres" class="btn btn-primary">
              <i class="bi bi-arrow-right me-2"></i>
              Voir les œuvres
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body">
            <h5 class="card-title">
              <i class="bi bi-cart3 me-2 text-success"></i>
              Commandes
            </h5>
            <p class="card-text text-muted">
              Gérer et suivre les commandes
            </p>
            <a routerLink="/admin/commandes" class="btn btn-success">
              <i class="bi bi-arrow-right me-2"></i>
              Voir les commandes
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body">
            <h5 class="card-title">
              <i class="bi bi-people me-2 text-info"></i>
              Utilisateurs
            </h5>
            <p class="card-text text-muted">
              Gérer les clients et artistes
            </p>
            <a routerLink="/admin/utilisateurs" class="btn btn-info">
              <i class="bi bi-arrow-right me-2"></i>
              Voir les utilisateurs
            </a>
          </div>
        </div>
      </div>
    </div>
  } @else {
    <div class="alert alert-warning">
      <i class="bi bi-exclamation-triangle me-2"></i>
      Impossible de charger les statistiques.
    </div>
  }
</div>