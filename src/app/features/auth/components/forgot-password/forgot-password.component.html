<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h2>Mot de passe oublié</h2>
      <p>Entrez votre email pour recevoir un code de réinitialisation</p>
    </div>

    @if (errorMessage()) {
      <div class="alert alert-danger" role="alert">
        {{ errorMessage() }}
      </div>
    }

    @if (successMessage()) {
      <div class="alert alert-success" role="alert">
        <div class="mb-3">
          <i class="bi bi-check-circle-fill me-2"></i>
          {{ successMessage() }}
        </div>
        <div class="border-top pt-3">
          <p class="mb-2"><strong>Prochaines étapes :</strong></p>
          <ol class="mb-3 ps-3">
            <li>Consultez votre boîte email <strong>{{ email() }}</strong></li>
            <li>Copiez le code à 6 chiffres reçu</li>
            <li>Cliquez sur le bouton ci-dessous</li>
          </ol>
          <a routerLink="/auth/reset-password" class="btn btn-primary w-100">
            <i class="bi bi-key-fill me-2"></i>
            Réinitialiser mon mot de passe
          </a>
        </div>
      </div>
    }

    @if (!successMessage()) {
      <form (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input
            type="email"
            class="form-control"
            id="email"
            [ngModel]="email()"
            (ngModelChange)="email.set($event)"
            name="email"
            placeholder="votre@email.com"
            required
          />
        </div>

        <button
          type="submit"
          class="btn btn-primary w-100"
          [disabled]="loading()"
        >
          @if (loading()) {
            <span class="spinner-border spinner-border-sm me-2"></span>
            Envoi...
          } @else {
            Envoyer le code
          }
        </button>
      </form>
    }

    <div class="text-center mt-4">
      <a routerLink="/auth/login" class="auth-link">Retour à la connexion</a>
    </div>
  </div>
</div>
